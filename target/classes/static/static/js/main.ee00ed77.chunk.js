(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{25:function(e,t,n){},32:function(e,t,n){e.exports=n(46)},37:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(14),o=n.n(c),l=(n(37),n(7)),i=n(8),s=n(11),u=n(9),m=n(10),h=(n(25),n(6)),d=n.n(h),p=n(15),f=n(5),E=n(3),b=n(48),g=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1},n.toggle=n.toggle.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement(E.l,{color:"dark",dark:!0,expand:"md"},r.a.createElement(E.m,{tag:b.a,to:"/"},"Home"),r.a.createElement(E.n,{onClick:this.toggle}),r.a.createElement(E.c,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(E.i,{className:"ml-auto",navbar:!0},r.a.createElement(E.j,null,r.a.createElement(E.k,{href:"https://twitter.com/rakimsv"},"@rakimsv")),r.a.createElement(E.j,null,r.a.createElement(E.k,{href:"https://github.com/rakimsv"},"GitHub")))))}}]),t}(a.Component),v=n(13),y=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!0,isAuthenticated:!1,user:void 0};var a=e.cookies;return n.state.csrfToken=a.get("XSRF-TOKEN"),n.login=n.login.bind(Object(f.a)(n)),n.logout=n.logout.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user",{credentials:"include"});case 2:return t=e.sent,e.next=5,t.text();case 5:""===(n=e.sent)?this.setState({isAuthenticated:!1}):this.setState({isAuthenticated:!0,user:JSON.parse(n)});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=window.location.port?":"+window.location.port:"";":3000"===e&&(e=":8080"),window.location.href="//"+window.location.hostname+e+"/private"}},{key:"logout",value:function(){fetch("/api/logout",{method:"POST",credentials:"include",headers:{"X-XSRF-TOKEN":this.state.csrfToken}}).then((function(e){return e.json()})).then((function(e){window.location.href=e.logoutUrl+"?id_token_hint="+e.idToken+"&post_logout_redirect_uri="+window.location.origin}))}},{key:"render",value:function(){var e=this.state.user?r.a.createElement("h2",null,"Welcome, ",this.state.user.name,"!"):r.a.createElement("p",null,"Please log in to manage your contacts :)"),t=this.state.isAuthenticated?r.a.createElement("div",null,r.a.createElement(E.a,{color:"default"},r.a.createElement(b.a,{to:"/plans"},"Manage contacts")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,{color:"danger",onClick:this.logout},"Log out")):r.a.createElement(E.a,{color:"success",onClick:this.login},"Log in");return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(E.d,{fluid:!0},e,t))}}]),t}(a.Component),O=Object(v.b)(y),j=n(50),k=n(51),w=n(49),C=n(31),S=n(52),x=function(e){function t(e){var n;Object(l.a)(this,t),n=Object(s.a)(this,Object(u.a)(t).call(this,e));var a=e.cookies;return n.state={plans:[],csrfToken:a.get("XSRF-TOKEN"),isLoading:!0},n.remove=n.remove.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),fetch("api/plans",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return e.setState({plans:t,isLoading:!1})}))}},{key:"remove",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/plan/".concat(t),{method:"DELETE",headers:{"X-XSRF-TOKEN":this.state.csrfToken,Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then((function(){var e=Object(C.a)(n.state.plans).filter((function(e){return e.id!==t}));n.setState({plans:e})}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.plans;if(t.isLoading)return r.a.createElement("p",null,"Loading...");var a=n.map((function(t){var n="".concat(t.address||""," ").concat(t.city||""," ").concat(t.county||""," ").concat(t.postCode||"");return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.name),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.phone),r.a.createElement("td",null,n),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.notes),r.a.createElement("td",null,r.a.createElement(E.b,null,r.a.createElement(E.a,{size:"sm",color:"info",tag:b.a,to:"/plans/"+t.id},"Update"),r.a.createElement(E.a,{size:"sm",color:"danger",onClick:function(){return e.remove(t.id)}},"Delete"))))}));return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(E.d,{fluid:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(E.a,{color:"success",tag:b.a,to:"/plans/new"},"Create")),r.a.createElement("h3",null,"My Contacts"),r.a.createElement(E.o,{className:"mt-4"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"20%"},"Name"),r.a.createElement("th",{width:"15%"},"Phone"),r.a.createElement("th",{width:"20%"},"Address"),r.a.createElement("th",null,"Notes"),r.a.createElement("th",{width:"10%"},"Actions"))),r.a.createElement("tbody",null,a))))}}]),t}(a.Component),N=Object(v.b)(Object(S.a)(x)),T=n(30);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var A=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).emptyItem={name:"",address:"",city:"",county:"",country:"",postCode:"",notes:""};var a=e.cookies;return n.state={item:n.emptyItem,csrfToken:a.get("XSRF-TOKEN")},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"===this.props.match.params.id){e.next=13;break}return e.prev=1,e.next=4,fetch("/api/plan/".concat(this.props.match.params.id));case 4:return e.next=6,e.sent.json();case 6:t=e.sent,this.setState({item:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.props.history.push("/");case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(T.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.state.item);r[a]=n,this.setState({item:r})}},{key:"handleSubmit",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state,a=n.item,n.csrfToken,e.next=4,fetch("/api/plan",{method:(a.id,"POST"),headers:{"X-XSRF-TOKEN":this.state.csrfToken,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 4:this.props.history.push("/plans");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.item,t=r.a.createElement("h2",null,e.id?"Edit Contact":"Add Contact");return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(E.d,null,t,r.a.createElement(E.e,{onSubmit:this.handleSubmit},r.a.createElement(E.f,null,r.a.createElement(E.h,{for:"name"},"Name"),r.a.createElement(E.g,{type:"text",name:"name",id:"name",value:e.name||"",onChange:this.handleChange})),r.a.createElement(E.f,null,r.a.createElement(E.h,{for:"name"},"Phone Number"),r.a.createElement(E.g,{type:"text",name:"phone",id:"phone",value:e.phone||"",onChange:this.handleChange})),r.a.createElement(E.f,null,r.a.createElement(E.h,{for:"address"},"Address"),r.a.createElement(E.g,{type:"text",name:"address",id:"address",value:e.address||"",onChange:this.handleChange})),r.a.createElement(E.f,null,r.a.createElement(E.h,{for:"city"},"City"),r.a.createElement(E.g,{type:"text",name:"city",id:"city",value:e.city||"",onChange:this.handleChange})),r.a.createElement("div",{className:"row"},r.a.createElement(E.f,{className:"col-md-4 mb-3"},r.a.createElement(E.h,{for:"county"},"County"),r.a.createElement(E.g,{type:"text",name:"county",id:"county",value:e.county||"",onChange:this.handleChange})),r.a.createElement(E.f,{className:"col-md-5 mb-3"},r.a.createElement(E.h,{for:"country"},"Country"),r.a.createElement(E.g,{type:"text",name:"country",id:"country",value:e.country||"",onChange:this.handleChange})),r.a.createElement(E.f,{className:"col-md-3 mb-3"},r.a.createElement(E.h,{for:"country"},"Post Code"),r.a.createElement(E.g,{type:"text",name:"postCode",id:"postCode",value:e.postCode||"",onChange:this.handleChange}))),r.a.createElement(E.f,null,r.a.createElement(E.h,{for:"notes"},"Notes"),r.a.createElement(E.g,{type:"text",name:"notes",id:"notes",value:e.notes||"",onChange:this.handleChange})),r.a.createElement(E.f,null,r.a.createElement(E.a,{color:"success",type:"submit"},"Save")," ",r.a.createElement(E.a,{color:"danger",tag:b.a,to:"/plans"},"Cancel")))))}}]),t}(a.Component),D=Object(v.b)(Object(S.a)(A)),L=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement(w.a,{path:"/",exact:!0,component:O}),r.a.createElement(w.a,{path:"/plans",exact:!0,component:N}),r.a.createElement(w.a,{path:"/plans/:id",component:D}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(45);o.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.ee00ed77.chunk.js.map